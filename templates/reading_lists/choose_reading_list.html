{% extends 'base.html' %}

{% block page_content %}
    <h1>Manage Your Reading List</h1>

    <form method="post" action="{% url 'select_reading_list' %}">
        {% csrf_token %}
        
        <h2>Select a Reading List</h2>
        <div class="form-group">
            <label for="reading_list" class="reading-list-label">Choose a Reading List:</label>
            <select name="reading_list" required id="reading_list" class="reading-list-select">
                <option value="">Select a Reading List</option>
                {% for list in reading_lists %}
                    <option value="{{ list.id }}">{{ list.name }}</option>
                {% endfor %}
            </select>
        </div>

        <h2>Select Books</h2>
        <table class="books-table">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Genre</th>
                    <th>Select</th>
                </tr>
            </thead>
            <tbody>
                {% for book in books %}
                    <tr>
                        <td><a href="{% url 'book_detail' book.id %}">{{ book.title }}</a></td>
                        <td>{{ book.author }}</td>
                        <td>{{ book.genre }}</td>
                        <td><input type="checkbox" name="books" value="{{ book.id }}"></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="btn-container">
            <button type="submit" class="btn btn-primary">Add Selected Books to List</button>
        </div>

        {% if error_message %}
            <div class="error-message">{{ error_message }}</div>
        {% endif %}
    </form>

{% endblock %}